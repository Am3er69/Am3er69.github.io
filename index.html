<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Forex Trader Pro - R1000</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 12px;
      background: #f5f5f5;
      color: #333;
    }
    h2 {
      margin-top: 16px;
      color: #2c3e50;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 16px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    select, input, button {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      border: 1px solid #ccc;
      border-radius: 6px;
      box-sizing: border-box;
    }
    .radio-group {
      display: flex;
      gap: 12px;
      margin: 8px 0;
      flex-wrap: wrap;
    }
    .radio-group label {
      display: flex;
      align-items: center;
      gap: 4px;
      font-weight: bold;
    }
    button {
      background: #27ae60;
      color: white;
      font-weight: bold;
      cursor: pointer;
    }
    button:hover {
      background: #219653;
    }
    .news-item, .event-item {
      padding: 10px 0;
      border-bottom: 1px solid #eee;
    }
    .event-item.high { background: #ffeaa7; border-left: 3px solid #e17055; }
    .event-item.medium { background: #fdcb6e; }
    .event-item.low { opacity: 0.7; }
    .trade-card {
      padding: 12px;
      border-radius: 6px;
      margin-top: 12px;
      font-size: 0.95em;
      background: #f8f9fa;
      border-left: 4px solid #3498db;
    }
    .trade-card.risky {
      border-left-color: #e74c3c;
      background: #fadbd8;
    }
    .warning {
      background: #fff3cd;
      padding: 10px;
      border-radius: 6px;
      margin: 12px 0;
      border-left: 4px solid #ffc107;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>üì± Forex Trader Pro (R1000 Account)</h2>

    <!-- ECONOMIC CALENDAR -->
    <h2>üìÖ Today's Economic Events</h2>
    <div id="economicCalendar">Loading events...</div>

    <!-- DAILY TRADES -->
    <h2>üî• Top 10 Daily Trades</h2>
    <div id="dailyTrades"></div>

    <!-- Rest of app (you can add chart/news below if needed) -->
  </div>

  <script>
    // === SIMULATED ECONOMIC CALENDAR (High-Impact Only) ===
    function getTodayEvents() {
      const now = new Date();
      const day = now.getDate();
      const month = now.getMonth();
      const year = now.getFullYear();
      const dayOfWeek = now.getDay(); // 0 = Sun, 5 = Fri

      const events = [];

      // High-impact recurring events
      const majorEvents = [
        { name: "Non-Farm Payrolls (NFP)", currencies: ["USD"], time: "12:30", impact: "high" },
        { name: "CPI (MoM)", currencies: ["USD", "EUR", "GBP"], time: "12:30", impact: "high" },
        { name: "Interest Rate Decision", currencies: ["USD", "EUR", "GBP", "JPY"], time: "11:00", impact: "high" },
        { name: "Retail Sales", currencies: ["USD"], time: "12:30", impact: "high" },
        { name: "GDP (Final)", currencies: ["USD", "EUR"], time: "12:30", impact: "high" },
        { name: "FOMC Meeting", currencies: ["USD"], time: "18:00", impact: "high" }
      ];

      // Simulate: NFP = first Friday of month
      if (dayOfWeek === 5 && day <= 7) {
        events.push({ ...majorEvents[0], actualTime: "12:30 UTC" });
      }

      // CPI: Usually around 10th‚Äì15th
      if (day >= 10 && day <= 15) {
        const currencies = ["USD"];
        if (month % 3 === 0) currencies.push("EUR"); // EUR CPI quarterly
        events.push({ name: "CPI (MoM)", currencies, time: "12:30", impact: "high", actualTime: "12:30 UTC" });
      }

      // Random high-impact event 30% of days
      if (Math.random() < 0.3 && events.length === 0) {
        const evt = majorEvents[Math.floor(Math.random() * 3)];
        events.push({ ...evt, actualTime: evt.time + " UTC" });
      }

      return events;
    }

    function renderCalendar() {
      const events = getTodayEvents();
      const container = document.getElementById('economicCalendar');

      if (events.length === 0) {
        container.innerHTML = '<p>‚úÖ No high-impact news today. Safe to trade!</p>';
        return;
      }

      let html = '<div class="warning">‚ö†Ô∏è High-impact news today! Avoid new trades 15 mins before/after.</div>';
      events.forEach(e => {
        html += `
          <div class="event-item ${e.impact}">
            <b>${e.name}</b><br>
            <small>Currencies: ${e.currencies.join(', ')} | Time: ${e.actualTime} | Impact: ${e.impact}</small>
          </div>
        `;
      });
      container.innerHTML = html;
    }

    // === DAILY TRADES (with news awareness) ===
    function generateDailyTrades() {
      const now = new Date();
      const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
      const stored = localStorage.getItem('forexTrades');
      const cached = stored ? JSON.parse(stored) : null;

      if (cached && new Date(cached.generated) >= today) {
        return cached.trades;
      }

      const pairs = ['EURUSD', 'GBPUSD', 'USDJPY', 'AUDUSD', 'USDCAD', 'USDCHF'];
      const sessions = ['London Open', 'NY Open', 'Overlap'];
      const strategies = [
        { name: "Breakout + Retest", tools: "S/R, ATR, Volume" },
        { name: "Trend Pullback", tools: "EMA, RSI, Trendline" },
        { name: "Range Reversal", tools: "Bollinger, Stochastic" }
      ];

      const events = getTodayEvents();
      const hasHighImpactNews = events.length > 0;

      const trades = [];
      for (let i = 0; i < 10; i++) {
        const pair = pairs[Math.floor(Math.random() * pairs.length)];
        const session = sessions[Math.floor(Math.random() * sessions.length)];
        const strat = strategies[Math.floor(Math.random() * strategies.length)];

        const basePrice = pair === 'USDJPY' ? 150 : 1.08;
        const entry = parseFloat((basePrice + (Math.random() - 0.5) * 0.02).toFixed(pair.includes('JPY') ? 3 : 5));
        const atr = pair === 'GBPUSD' ? 90 : 70;
        const slPips = Math.round(atr * 0.7);
        const tpPips = Math.round(atr * 1.4);
        const pipSize = pair.includes('JPY') ? 0.01 : 0.0001;
        const sl = parseFloat((entry - slPips * pipSize).toFixed(pair.includes('JPY') ? 3 : 5));
        const tp = parseFloat((entry + tpPips * pipSize).toFixed(pair.includes('JPY') ? 3 : 5));

        let winProb = 58 + Math.floor(Math.random() * 15);
        let isRisky = false;

        // Reduce win prob & flag if news today
        if (hasHighImpactNews && pair.includes('USD')) {
          winProb = Math.max(45, winProb - 10);
          isRisky = true;
        }

        trades.push({
          pair, session, entry, sl, tp, slPips, tpPips,
          strategy: strat.name,
          tools: strat.tools,
          winProb,
          isRisky,
          validUntil: new Date(today.getTime() + 24*60*60*1000).toISOString(),
          generated: today.toISOString()
        });
      }

      trades.sort((a, b) => b.winProb - a.winProb);
      localStorage.setItem('forexTrades', JSON.stringify({ trades, generated: today.toISOString() }));
      return trades;
    }

    function renderTrades() {
      const trades = generateDailyTrades();
      const now = new Date();
      const container = document.getElementById('dailyTrades');

      let html = '';
      trades.forEach((trade, i) => {
        const isExpired = new Date(trade.validUntil) < now;
        const cardClass = trade.isRisky ? 'risky' : '';
        html += `
          <div class="trade-card ${cardClass} ${isExpired ? 'expired' : ''}">
            <div><b>#${i+1} ‚Ä¢ ${trade.pair}</b> ${trade.winProb}% ‚úÖ</div>
            <div>Entry: ${trade.entry} | SL: ${trade.sl} (${trade.slPips}p) | TP: ${trade.tp} (${trade.tpPips}p)</div>
            <div><small>Strategy: ${trade.strategy} | Tools: ${trade.tools}</small></div>
            ${trade.isRisky ? '<div><i>‚ö†Ô∏è Risky: USD news today</i></div>' : ''}
            ${isExpired ? '<div><i>Expired</i></div>' : ''}
          </div>
        `;
      });
      container.innerHTML = html;
    }

    // === INIT ===
    window.onload = function() {
      renderCalendar();
      renderTrades();
    };
  </script>
</body>
</html>
